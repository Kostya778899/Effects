<style type="text/css">
    @import url("https://fonts.googleapis.com/css?family=Raleway:900&display=swap");

    /*body {
        margin: 0px;
    }*/

    #container {
        position: absolute;
        margin: auto;
        width: 100vw;
        height: 80pt;
        top: 0;
        bottom: 0;
        filter: url(#threshold) blur(0.6px);
    }
    /*#text1, #text2 {
        position: absolute;
        width: 100%;
        display: inline-block;
        font-family: "Raleway", sans-serif;
        font-size: 80pt;
        text-align: center;
        user-select: none;
    }*/
    .text {
        position: absolute;
        /*width: 100%;*/
        /*display: inline-block;*/
        /*font-family: "Raleway", sans-serif;*/
        /*font-size: 80pt;*/
        /*text-align: center;*/
        /*user-select: none;*/
    }

</style>
<body>
    <!--<div id="container">
        <span id="text1"></span>
        <span id="text2"></span>
    </div>-->
    <div id="container">
        <p class="text start"></p>
        <p class="text end"></p>
    </div>

    <svg id="filters">
        <defs>
            <filter id="threshold">
                <feColorMatrix in="SourceGraphic" type="matrix" values="1 0 0 0 0
									0 1 0 0 0
									0 0 1 0 0
									0 0 0 255 -140" />
            </filter>
        </defs>
    </svg>
</body>
<script>
    var text = {
        start: document.getElementsByClassName('text start')[0],
        end: document.getElementsByClassName('text end')[0]
    };


    const lerp = (x, y, a) => x * (1 - a) + y * a
    const invlerp = (a, b, v) => clamp((v - a) / (b - a))
    const clamp = (v, min = 0, max = 1) => Math.min(max, Math.max(min, v))
    function sleep(ms) { return new Promise(resolve => setTimeout(resolve, ms)); }

    { start: String; end: String } function setTextNotAnimated(value) {
        text.start.textContent = value;
        text.end.textContent = value;
    }
    { value: String; } async function setTextAnimated(value, time, step = 10) {
        text.end.textContent = value;

        for (var i = 0.; i < time; i += step) {
            setMorph(invlerp(0., time, i));
            await sleep(step);
        }
        text.start.textContent = value;
    }

    function setMorph(fraction) {
        //console.log(fraction);

        text.end.style.filter = `blur(${Math.min(8 / fraction - 8, 100)}px)`;
        text.end.style.opacity = `${Math.pow(fraction, 0.4) * 100}%`;

        fraction = 1 - fraction;
        text.start.style.filter = `blur(${Math.min(8 / fraction - 8, 100)}px)`;
        text.start.style.opacity = `${Math.pow(fraction, 0.4) * 100}%`;
    }


    setTextNotAnimated('Start text');
    (async () => {
        for (var i = 0; i < 1000; i++) {
            await setTextAnimated('new text!)', 1000);
            await setTextAnimated('wery new text!!!', 1000);
        }
        return;
    })();
</script>